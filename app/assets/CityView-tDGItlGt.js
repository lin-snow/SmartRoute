import{d as c,k as N,l as S,m as y,n as $,o as b,c as g,b as o,w as l,E as B,a as D,e as A,i as m,p as R,f as T,j as h,g as k,h as I,q as L,s as M,t as P}from"./index-EnGu6XRe.js";/* empty css                        *//* empty css                 */const U=c({__name:"AdminCity",setup(v){const n=N(),p=(a,e)=>{n.deleteCity(a,e)},d=S(),s=y({name:"",code:""}),w=y({name:[{validator:(a,e,t)=>{if(!e)return t(new Error("Please input the Name"));if(!n.allCities||n.allCities.length===0)return console.error("City data is not loaded yet!"),t(new Error("City data not available"));if(n.allCities.some(r=>r.name.toLowerCase()===e.toLowerCase()))return t(new Error("City Name already exists"));t()},trigger:"blur"}],code:[{validator:(a,e,t)=>{if(!e)return t(new Error("Please input the Code"));if(!n.allCities||n.allCities.length===0)return console.error("City data is not loaded yet!"),t(new Error("City data not available"));if(n.allCities.some(r=>r.cityCode.toString()===e.toString()))return t(new Error("City Code already exists"));t()},trigger:"blur"}]}),E=a=>{a&&a.validate(e=>{if(e){console.log("submit!");const t=new FormData;t.append("name",s.name),t.append("cityCode",s.code),R.post("admin/city/add",t).then(()=>{n.fetchCities(),C(a)}).catch(r=>{console.error("Error submitting form:",r)})}else console.log("error submit!")})},C=a=>{a&&a.resetFields()};return $(()=>{n.fetchCities()}),(a,e)=>{const t=T,r=h,x=k,_=I,f=L,u=M,F=P,V=B;return b(),g("div",null,[o(V,null,{default:l(()=>[o(_,null,{default:l(()=>[e[5]||(e[5]=D("h2",null,"Manage Your Cities!",-1)),o(x,{data:A(n).allCities,style:{width:"100%"},"empty-text":"no cities available!"},{default:l(()=>[o(t,{label:"City Name",prop:"name"}),o(t,{label:"City Code",prop:"cityCode"}),o(t,{label:"Actions",align:"right"},{default:l(i=>[o(r,{size:"small",type:"danger",onClick:z=>p(i.$index,i.row)},{default:l(()=>e[4]||(e[4]=[m(" Delete ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),o(_,null,{default:l(()=>[o(F,{ref_key:"ruleFormRef",ref:d,style:{"max-width":"600px"},model:s,"status-icon":"",rules:w,"label-width":"auto",class:"demo-ruleForm"},{default:l(()=>[o(u,{label:"City Name",prop:"name"},{default:l(()=>[o(f,{modelValue:s.name,"onUpdate:modelValue":e[0]||(e[0]=i=>s.name=i)},null,8,["modelValue"])]),_:1}),o(u,{label:"City Code",prop:"code"},{default:l(()=>[o(f,{modelValue:s.code,"onUpdate:modelValue":e[1]||(e[1]=i=>s.code=i)},null,8,["modelValue"])]),_:1}),o(u,null,{default:l(()=>[o(r,{type:"primary",onClick:e[2]||(e[2]=i=>E(d.value))},{default:l(()=>e[6]||(e[6]=[m(" Submit ")])),_:1}),o(r,{onClick:e[3]||(e[3]=i=>C(d.value))},{default:l(()=>e[7]||(e[7]=[m("Reset")])),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})])}}}),J=c({__name:"CityView",setup(v){return(n,p)=>(b(),g("div",null,[o(U)]))}});export{J as default};
